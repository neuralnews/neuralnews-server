{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap a87164b60bbecfc546c5","webpack:///./src/index.js","webpack:///./src/api.js","webpack:///./src/utilities.js","webpack:///./src/request.js","webpack:///external \"https\"","webpack:///external \"querystring\""],"names":["apiRequest","bind","autoComplete","interestByRegion","interestOverTime","relatedQueries","relatedTopics","request","searchType","resultsPromise","reqObj","cb","cbFunc","obj","Error","Promise","reject","then","res","catch","err","isLessThan7Days","convertDateToString","formatTime","constructObj","formatResolution","parseResults","formatKeywords","getResults","date1","date2","Math","abs","d","shouldIncludeTime","month","getUTCMonth","toString","length","day","getUTCDate","year","getUTCFullYear","hour","getUTCHours","minute","getUTCMinutes","startTime","Date","endTime","temp","granularTimeResolution","time","Array","isArray","keyword","hl","category","resolution","resolutions","isResValid","some","toUpperCase","results","JSON","parse","slice","widgets","e","requestBody","reduce","arr","push","map","path","encodeURIComponent","_id","options","method","host","qs","req","stringify","comparisonItem","property","tz","parsedResults","resultObj","find","id","indexOf","errObj","message","token","requestOptions","nextOptions","resolve","chunk","on","data","end"],"mappings":"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","file":"google-trends-api.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"https\"), require(\"querystring\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"google-trends-api\", [\"https\", \"querystring\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"google-trends-api\"] = factory(require(\"https\"), require(\"querystring\"));\n\telse\n\t\troot[\"google-trends-api\"] = factory(root[\"https\"], root[\"querystring\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap a87164b60bbecfc546c5\n **/","'use strict';\nimport api from './api';\nimport request from './request';\n\nconst apiRequest = api.bind(this, request);\n\nexport default {\n  autoComplete: apiRequest('Auto complete'),\n  interestByRegion: apiRequest('Interest by region'),\n  interestOverTime: apiRequest('Interest over time'),\n  relatedQueries: apiRequest('Related queries'),\n  relatedTopics: apiRequest('Related topics'),\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/index.js\n **/","'use strict';\nimport { constructObj, getResults } from './utilities';\n\nexport default (request, searchType) => {\n  const resultsPromise = getResults(request);\n\n  return (reqObj, cb) => {\n    const {\n      cbFunc,\n      obj,\n    } = constructObj(reqObj, cb);\n\n    if (obj instanceof Error) return Promise.reject(cbFunc(obj));\n\n    return resultsPromise(searchType, obj)\n    .then(res => cbFunc(null, res))\n    .catch(err => Promise.reject(cbFunc(err)));\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/api.js\n **/","'use strict';\nexport function isLessThan7Days(date1, date2) {\n  return (Math.abs(date2 - date1) / (24 * 60 * 60 * 1000)) < 7;\n}\n\nexport function convertDateToString(d, shouldIncludeTime) {\n  let month = (d.getUTCMonth() + 1).toString();\n\n  month = month.length < 2 ? '0' + month : month;\n  const day = d.getUTCDate().toString();\n  const year = d.getUTCFullYear().toString();\n  const hour = d.getUTCHours();\n  const minute = d.getUTCMinutes();\n\n  if (shouldIncludeTime) {\n    return `${year}-${month}-${day}T${hour}\\\\:${minute}\\\\:00`;\n  }\n\n  return `${year}-${month}-${day}`;\n}\n\nexport function formatTime(obj) {\n  if (obj.startTime && !(obj.startTime instanceof Date)) {\n    return new Error('startTime must be a Date object');\n  }\n  if (obj.endTime && !(obj.endTime instanceof Date)) {\n    return new Error('endTime must be a Date object');\n  }\n\n  if (obj.startTime && obj.endTime && obj.startTime > obj.endTime) {\n    const temp = obj.startTime;\n\n    obj.startTime = obj.endTime;\n    obj.endTime = temp;\n  }\n\n  if (!obj.endTime) obj.endTime = new Date();\n  if (!obj.startTime) obj.startTime = new Date('2004-01-01');\n\n  const shouldIncludeTime = isLessThan7Days(obj.startTime, obj.endTime);\n\n  const startTime = convertDateToString(obj.startTime,\n    shouldIncludeTime && obj.granularTimeResolution);\n  const endTime = convertDateToString(obj.endTime,\n    shouldIncludeTime && obj.granularTimeResolution);\n\n  obj.time = `${startTime} ${endTime}`;\n  return obj;\n}\n\nexport function constructObj(obj, cbFunc) {\n  if (typeof obj === 'function') cbFunc = obj;\n\n  if (!obj || !!obj && typeof obj !== 'object' || Array.isArray(obj)) {\n    obj = new Error('Must supply an object');\n  } else if (!obj.keyword) obj = new Error('Must have a keyword field');\n\n  if (!!cbFunc && typeof cbFunc !== 'function') {\n    obj = new Error('Callback function must be a function');\n  }\n\n  if (!obj.hl) obj.hl = 'en-US';\n  if (!obj.category) obj.category = 0;\n\n  if (!cbFunc) {\n    cbFunc = (err, res) => {\n      if (err) return err;\n      return res;\n    };\n  }\n\n  obj = formatTime(obj);\n\n  return {\n    cbFunc,\n    obj,\n  };\n}\n\nexport function formatResolution(resolution = '') {\n  const resolutions = ['COUNTRY', 'REGION', 'CITY', 'DMA'];\n  const isResValid = resolutions.some((res) => {\n    return res === resolution.toUpperCase();\n  });\n\n  if (isResValid) return resolution.toUpperCase();\n  return '';\n}\n\n/**\n * Parse the result of the google api as JSON\n * Throws an Error if the JSON is invalid\n * @param  {String} results\n * @return {Object}\n */\nexport function parseResults(results) {\n  // If this fails, you've hit the rate limit or Google has changed something\n  try {\n    return JSON.parse(results.slice(4)).widgets;\n  } catch (e) {\n    // Throw the JSON error e.g.\n    // { message: 'Unexpected token C in JSON at position 0',\n    //   requestBody: '<!DOCTYPE html><html>...'}\n    e.requestBody = results;\n    throw e;\n  }\n}\n\n/**\n * Create the array of keywords (comparisonItems) to be used\n * @param  {Object} obj The query obj with .keyword property\n * @return {Array}     Returns an array of comparisonItems\n */\nexport function formatKeywords(obj) {\n\n  // If we are requesting an array of keywords for comparison\n  if (Array.isArray(obj.keyword)) {\n\n    // Map the keywords to the items array\n    return obj.keyword.reduce((arr, keyword) => {\n      // Add the keyword to the array\n      arr.push({ ...obj, keyword });\n\n      return arr;\n    }, []);\n\n  }\n\n  return [obj];\n}\n\nexport function getResults(request) {\n  return (searchType, obj) => {\n    const map = {\n      'Auto complete': {\n        path: `/trends/api/autocomplete/${encodeURIComponent(obj.keyword)}`,\n      },\n      'Interest over time': {\n        path: '/trends/api/widgetdata/multiline',\n        _id: 'TIMESERIES',\n      },\n      'Interest by region': {\n        path: '/trends/api/widgetdata/comparedgeo',\n        resolution: formatResolution(obj.resolution),\n        _id: 'GEO_MAP',\n      },\n      'Related topics': {\n        path: '/trends/api/widgetdata/relatedsearches',\n        _id: 'RELATED_TOPICS',\n      },\n      'Related queries': {\n        path: '/trends/api/widgetdata/relatedsearches',\n        _id: 'RELATED_QUERIES',\n      },\n    };\n\n    const options = {\n      method: 'GET',\n      host: 'trends.google.com',\n      path: '/trends/api/explore',\n      qs: {\n        hl: obj.hl,\n        req: JSON.stringify({\n          comparisonItem: formatKeywords(obj),\n          category: obj.category,\n          property: '',\n        }),\n        tz: 300,\n      },\n    };\n\n    const { path, resolution, _id } = map[searchType];\n\n    return request(options)\n    .then((results) => {\n      const parsedResults = parseResults(results);\n\n      /**\n       * Search for the id that matches the search result\n       * Auto complete does not have results on initial query\n       * so just pass the first available result with request\n      */\n      const resultObj = parsedResults.find(({ id = '', request }) => {\n        return id.indexOf(_id) > -1 ||\n          (searchType === 'Auto complete' && request);\n      });\n\n      if (!resultObj) {\n        const errObj = {\n          message: 'Available widgets does not contain selected api type',\n          requestBody: results,\n        };\n\n        throw errObj;\n      }\n\n      let req = resultObj.request;\n      const token = resultObj.token;\n\n      if (resolution) req.resolution = resolution;\n      req.requestOptions.category = obj.category;\n      req.requestOptions.property = '';\n      req = JSON.stringify(req);\n\n      const nextOptions = {\n        path,\n        method: 'GET',\n        host: 'trends.google.com',\n        qs: {\n          hl: obj.hl,\n          req,\n          token,\n          tz: 300,\n        },\n      };\n\n      return request(nextOptions);\n    })\n    .then((res) => {\n      try {\n        /** JSON.parse will decode unicode */\n        const results = JSON.stringify(JSON.parse(res.slice(5)));\n\n        return results;\n      } catch (e) {\n        /** throws if not valid JSON, so just return unaltered res string */\n        return res;\n      }\n    });\n  };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/utilities.js\n **/","'use strict';\nimport https from 'https';\nimport querystring from 'querystring';\n\nexport default function request({method, host, path, qs}) {\n  const options = {\n    host,\n    method,\n    path: `${path}?${querystring.stringify(qs)}`,\n  };\n\n  return new Promise((resolve, reject) => {\n    const req = https.request(options, (res) => {\n      let chunk = '';\n\n      res.on('data', (data) => {\n        chunk += data;\n      });\n\n      res.on('end', () => {\n        resolve(chunk.toString('utf8'));\n      });\n    });\n\n    req.on('error', (e) => {\n      reject(e);\n    });\n\n    req.end();\n  });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/request.js\n **/","module.exports = require(\"https\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"https\"\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = require(\"querystring\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"querystring\"\n ** module id = 5\n ** module chunks = 0\n **/"],"sourceRoot":""}